<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>01_auto_formatting.html</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>

</head>

<body>

<h1 id="auto-formatting-and-pep8">Auto-formatting and PEP8</h1>
<p><strong>What:</strong> Format your code according to the official style guide lines (<a href="https://www.python.org/dev/peps/pep-0008/">PEP8</a>).</p>
<p><strong>Why:</strong></p>
<ul>
<li><p>Common coding standard and improved code readability</p></li>
<li><p>Easy to automate, no need to spend mental resources while coding</p></li>
<li><p>Auto-formatting modifies how your code looks without affecting its behavior</p></li>
</ul>
<p><strong>Tools:</strong> Three very prominent Python auto-formatting tools are</p>
<ul>
<li><a href="https://github.com/hhatto/autopep8"><code>autopep8</code></a></li>
<li><a href="https://github.com/psf/black"><code>black</code></a></li>
<li><a href="https://github.com/google/yapf"><code>yapf</code></a></li>
</ul>
<p>Check out <a href="https://www.kevinpeters.net/auto-formatters-for-python">this</a> blog post for more details. Chances are high your editor supports one of the above formatters via a plugin.</p>
<hr />
<p><strong>Example:</strong> Let’s try one of the above auto-formatters. We will use <code>autopep8</code> and install it by:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="ex">pip</span> install autopep8</a></code></pre></div>
<p>Let us consider an arbitrary piece of Python code, for instance the following function that returns the sum of its 5 inputs (script <a href="./poor_format.py"><code>poor_format.py</code></a>):</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">def</span> sum_five_arguments(argument1, argument2, argument3 , keyword_argument1<span class="op">=</span><span class="dv">123</span>, keyword_argument2 <span class="op">=</span> <span class="dv">5</span>):</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">    <span class="co">&quot;&quot;&quot;Return sum of five arguments.&quot;&quot;&quot;</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">    sum_of_args<span class="op">=</span>argument1<span class="op">+</span>argument2<span class="op">+</span>argument3<span class="op">+</span>keyword_argument1 <span class="op">+</span> keyword_argument2</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">    <span class="cf">return</span> sum_of_all_args</a></code></pre></div>
<p>Beside lacking elegance, this code suffers from poor readability caused by formatting issues:</p>
<ul>
<li>Very long lines</li>
<li>Inconsistent conventions for spaces between arguments/operators</li>
</ul>
<p>The optical quality of this code can easily be improved by invoking <code>autopep8</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="ex">autopep8</span> --inplace --aggressive --aggressive poor_format.py</a></code></pre></div>
<p>This will trigger the code-formatter (with a certain aggressive level specified by flags) to apply changes to the poorly formatted script and save it. The result should look like that:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">def</span> sum_five_arguments(</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">        argument1,</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">        argument2,</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">        argument3,</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">        keyword_argument1<span class="op">=</span><span class="dv">123</span>,</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">        keyword_argument2<span class="op">=</span><span class="dv">5</span>):</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">    <span class="co">&quot;&quot;&quot;Returns a sum of all arguments.&quot;&quot;&quot;</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8">    sum_of_args <span class="op">=</span> argument1 <span class="op">+</span> argument2 <span class="op">+</span> argument3 <span class="op">+</span> <span class="op">\</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9">        keyword_argument1 <span class="op">+</span> keyword_argument2</a>
<a class="sourceLine" id="cb4-10" data-line-number="10">    <span class="cf">return</span> sum_of_args</a></code></pre></div>
<p>Congratulations! The formatting issues were consistently resolved.</p>
<hr />
<p>Different auto-formatters can yield different outputs, but they are highly customizable.</p>
<p><strong>Links:</strong></p>
<ul>
<li><p><a href="https://www.kevinpeters.net/auto-formatters-for-python">Kevin Peters: Auto formatters for Python</a></p></li>
<li><p><a href="https://www.python.org/dev/peps/pep-0008/">PEP 8 – Style Guide for Python Code</a></p></li>
<li><p><a href="https://yapf.now.sh/">YAPF Online Demo</a></p></li>
</ul>

</body>
</html>
